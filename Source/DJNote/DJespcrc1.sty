%%%%%%%%%% DJespcrc1.sty %%%%%%%%%%
% C(amera) R(eady) C(opy) document-style option (one-column format).
% $Revision: 1.2 $, $Date: 2004/02/24 11:22:11 $
% To be used with LaTeX version 2.09 (14 January 1992 or later), or LaTeX2e.
%
% Copyright (C) 1992 by Elsevier Science Publishers. All rights reserved.
%
% IMPORTANT NOTICE:
%
% You are not allowed to change this file. You may however copy this file
% to a file with a different name and then change the copy.
%
% You are NOT ALLOWED to distribute this file alone. You are NOT ALLOWED
% to take money for the distribution or use of this file (or a changed
% version) except for a nominal charge for copying etc.
%
% You are allowed to distribute this file under the condition that it is
% distributed together with espcrc1.tex.
%
% If you receive only this file from someone, complain!
%
%
%
% Usage: \documentclass[fleqn,12pt,twoside]{article}
% \usepackage{espcrc1}
%

%
% 20090122	Change the formatting of figure and table captions using package caption.
%
% 20090123	Add tow package 'varioref' and 'paralist' to give better formatting of cross reference. Note that varioref has to followed by hyperref, and then paralist. Otherwise, if you put varioref last, then \autoref{eq:***} gives 'Figure (1)'
% 	Now the cross-ref look like:
%	\ref{eq:1} produces a linked "(1)"
%	\ref*{eq:1} produces an unlinked "(1)"
%	\ref{fig:1} produces a linked "1"
%	\ref*{fig:1} produces an unlinked "1"
%	\autoref{eq:1} produces a linked "Equation (1)"
%	\autoref*{eq:1} produces an unlinked "Equation (1)"
%	\autoref{fig:1} produces a linked "Figure 1"
%	\autoref*{fig:1} produces an unlinked "Figure 1"
%	\ref{tab:1} produces a linked "1"
%	\ref*{tab:1} produces an unlinked "1"
%	\autoref{tab:1} produces a linked "Table 1"
%	\autoref*{tab:1} produces an unlinked "Table 1"
%	and the item one looks like
%	\ref{item:1} produces a linked "(i)"
%	\ref*{item:1} produces an unlinked "(i)"
%	\autoref{item:1} produces a linked "item (i)"
%	\autoref*{item:1} produces an unlinked "item (i)"
% Reference: http://phaseportrait.blogspot.com/search/label/autoref
%
%
% 20090618	Rewirte, all packages loaded outside.
%
% 2010-05-09 Refine using my Macbook Pro
%
%


\def\readRCS$#1: #2 #3 #4 #5${%
 \def\filename{#2}%
 \def\fileversion{#3}%
 \def\filedate{#4}%
}
\readRCS
$Id: DJespcrc1.sty,v 1.0 2008/05/22 11:54:50 spepping Exp $
\ProvidesPackage{DJespcrc1}[\filedate \space v\fileversion
   \space Elsevier 1-column CRC]

\DeclareOption{headings}{\@headingstrue}
\newif\if@headings\@headingsfalse
\ProcessOptions

%\usepackage{amssymb}
%\RequirePackage{graphics}
%\usepackage{fancyhdr}
%\usepackage{eucal}
%\usepackage[english]{babel}
%\usepackage[usenames, dvipsnames]{color}
%\usepackage[perpage]{footmisc}
%\usepackage{ifthen}
%\usepackage{titlesec}
%\usepackage{gensymb}
%\RequirePackage[numbers, sort&compress]{natbib}
\RequirePackage{ifpdf}
\RequirePackage{ifthen}

% FIGURES AND TABLES
%\long\def\@makefigurecaption#1#2{\vskip 4mm \footnotesize {\bf #1.} #2\par}

%\long\def\@maketablecaption#1#2{\hbox to \hsize{\parbox[t]{\hsize}
%  {\footnotesize {\bf #1.}  #2}}\vskip 0.3ex}

%\def\fnum@figure{Figure \thefigure}
%\def\figure{\let\@makecaption\@makefigurecaption \@float{figure}}
%\@namedef{figure*}{\let\@makecaption\@makefigurecaption \@dblfloat{figure}}

% \def\fnum@table{Table \thetable}
%\def\table{\let\@makecaption\@maketablecaption \@float{table}}
%\@namedef{table*}{\let\@makecaption\@maketablecaption \@dblfloat{table}}

% Define DJ caption formatting.
% Default formatting of captions
% \RequirePackage[aboveskip=10mm, font={footnotesize}, labelfont={bf}]{caption}
% Style of figure caption
% \captionsetup[figure]{labelsep=period}
% Style of figure table
% \captionsetup[table]{aboveskip=4mm, textfont={sc}}



% \newif \ifpdf
    % \ifx \pdfoutput \undefined
        %%% for running latex
        % \pdffalse
    % \else
        %%% for running pdflatex
        % \pdfoutput = 1    % positive value for a PDF output
                          %%% otherwise a DVI
        % \pdftrue
% \fi

% Now define cross-ref formatting, use varioref and paralist
% \usepackage{varioref}
% \labelformat{equation}{\textup{(#1)}}
% \usepackage{paralist}
%\labelformat{item}{\textup{(#1)}}

% Now define cross-ref formatting, use varioref and paralist
% \usepackage{varioref}
%\labelformat{part}{\textup{(#1)}}
%\labelformat{chapter}{\textup{(#1)}}
%\labelformat{section}{\textup{(#1)}}
%\labelformat{subsection}{\textup{(#1)}}
%\labelformat{subsubsection}{\textup{(#1)}}
%\labelformat{paragraph}{\textup{(#1)}}
%\labelformat{subparagraph}{\textup{(#1)}}

%\labelformat{theorem}{\textup{(#1)}}
%\labelformat{thm}{\textup{(#1)}}
%\labelformat{Hfootnote}{\textup{(#1)}}
%\labelformat{mpfootnote}{\textup{(#1)}}
%\labelformat{appendix}{\textup{(#1)}}
%???\labelformat{AMS}{\textup{(#1)}}

% \labelformat{equation}{\textup{(#1)}}
%\labelformat{figure}{\textup{(#1)}}
%\labelformat{table}{\textup{(#1)}}

%\labelformat{enumi}{\textup{(#1)}}
% \labelformat{enumii}{\textup{{\theenumi}.#1}}
% \labelformat{enumiii}{\textup{{\theenumi}.{\theenumii}.#1}}
% \labelformat{enumiv}{\textup{{\theenumi}.{\theenumii}.{\theenumiii}.#1}}



% Now add hyperref package
% \ifpdf
%-->
%--> Google.com search "hyperref options"
%-->
%--> http://www.ai.mit.edu/lab/sysadmin/latex/documentation/latex/hyperref/manual.pdf
%--> http://www.chemie.unibas.ch/~vogtp/LaTeX2PDFLaTeX.pdf
%--> http://www.uni-giessen.de/partosch/eurotex99/ oberdiek/print/sli4a4col.pdf
%--> http://me.in-berlin.de/~miwie/tex-refs/html/latex-packages.html
%-->
	% \IfFileExists{lmodern.sty}
	% {\usepackage{lmodern} \usepackage[T1]{fontenc}}{}

    % \usepackage[ pdftex, plainpages = false, pdfpagelabels,
                 % pdfpagelayout = useoutlines,
                 % bookmarks,
                 % bookmarksopen = true,
                 % bookmarksnumbered = true,
                 % breaklinks = true,
                 % linktocpage,
                 % colorlinks = true,
                 % linkcolor = blue,
                 % urlcolor  = blue,
                 % citecolor = blue,
                 % anchorcolor = green,
                 % hyperindex = true,
                 % hyperfigures
                 % ]{hyperref}

    % \DeclareGraphicsExtensions{.png, .jpg, .pdf}
    % \usepackage[pdftex]{graphicx}
    % \pdfcompresslevel=9
%    \graphicspath{{ThesisFigs/PNG/}{ThesisFigs/PDF/}{ThesisFigs/}}
% \else
    % \usepackage[ dvips,
                 % bookmarks,
                 % bookmarksopen = true,
                 % bookmarksnumbered = true,
                 % breaklinks = true,
                 % linktocpage,
                 % colorlinks = true,
                 % linkcolor = blue,%black
                 % urlcolor  = blue,%black
                 % citecolor = blue,%black
                 % anchorcolor = green, %black
                 % hyperindex = true,
                 % hyperfigures
                 % ]{hyperref}

    % \DeclareGraphicsExtensions{.eps, .ps}
    % \usepackage{epsfig}
    % \usepackage{graphicx}
%    \graphicspath{{ThesisFigs/EPS/}{ThesisFigs/}}
% \fi

%% We need to redefine \autoref. We should use 
%% abbreviations inside the sentence and full names 
%% at the beginning of sentences. Additionally,
%% need to handle the plural cases.

% \Autoref is for the beginning of the sentence
% \let\orgautoref\autoref
% \providecommand{\Autoref}
        % {\def\equationautorefname{Equation}%
         % \def\figureautorefname{Figure}%
         % \def\subfigureautorefname{Figure}%
         % \def\sectionautorefname{Section}%
         % \def\subsectionautorefname{Section}%
         % \def\subsubsectionautorefname{Section}%
         % \def\Itemautorefname{Item}%
         % \def\tableautorefname{Table}%
         % \orgautoref}

% \Autorefs is plural for the beginning of the sentence
% \providecommand{\Autorefs}
        % {\def\equationautorefname{Equations}%
         % \def\figureautorefname{Figures}%
         % \def\subfigureautorefname{Figures}%
         % \def\sectionautorefname{Sections}%
         % \def\subsectionautorefname{Sections}%
         % \def\subsubsectionautorefname{Sections}%
         % \def\Itemautorefname{Items}%
         % \def\tableautorefname{Tables}%
         % \orgautoref}

% \autoref is used inside a sentence 
% (this is a renew of the standard)
% \renewcommand{\autoref}
%         {\def\equationautorefname{Eq.}%
%          \def\figureautorefname{Fig.}%
%          \def\subfigureautorefname{Fig.}%
%          \def\sectionautorefname{Sect.}%
%          \def\subsectionautorefname{Sect.}%
%          \def\subsubsectionautorefname{Sect.}%
%          \def\Itemautorefname{item}%
%          \def\tableautorefname{Table}%
%          \orgautoref}

% % \autorefs is plural for inside a sentence
% \providecommand{\autorefs}
%         {\def\equationautorefname{Eqs.}%
%          \def\figureautorefname{Figs.}%
%          \def\subfigureautorefname{Figs.}%
%          \def\sectionautorefname{Sects.}%
%          \def\subsectionautorefname{Sects.}%
%          \def\subsubsectionautorefname{Sects.}%
%          \def\Itemautorefname{items}%
%          \def\tableautorefname{Tables}%
%          \orgautoref}

% \autorefs is plural for inside a sentence
% \providecommand{\autorefs}
        % {\def\equationautorefname{Equations}%
         % \def\figureautorefname{Figures}%
         % \def\subfigureautorefname{Figures}%
         % \def\sectionautorefname{sections}%
         % \def\subsectionautorefname{sections}%
         % \def\subsubsectionautorefname{sections}%
         % \def\Itemautorefname{items}%
         % \def\tableautorefname{Tables}%
         % \orgautoref}

% Don't forget \autopageref
% \Autopageref is for the beginning of the sentence
% \let\orgautopageref\autopageref
% \providecommand{\Autopageref}
        % {\def\pageautorefname{Page}%
         % \orgautopageref}

% \Autopagerefs is plural for the beginning of the sentence
% \providecommand{\Autopagerefs}
        % {\def\pageautorefname{Pages}%
         % \orgautopageref}


% SIDE MARGINS:
\oddsidemargin   4mm              % Left margin on odd-numbered pages.
\evensidemargin -4mm              % Left margin on even-numbered pages.

% VERTICAL SPACING:
\topmargin      -4mm              % Nominal distance from top of page to top
                                  % of box containing running head.
\headheight     13mm              % No running headline, and no
\headsep        24pt              % space between running headline and text.
\footskip       30pt              % Baseline-baseline distance between
                                  % running footline and last line of text.

% DIMENSION OF TEXT:
\textheight 230mm                 % Height of text part of page
\textwidth 160mm                  % Width of text part of page, i.e of line

% PARAGRAPHING
\parskip 0pt                      % No extra vertical space between paragraphs.
\parindent 1em                    % Width of paragraph indentation.

% SECTIONAL UNITS:
\newdimen\@bls                    % \@b(ase)l(ine)s(kip)
\@bls=\baselineskip               % \@bls ~= \baselineskip for \normalsize
\advance\@bls -1ex                % (fudge term)
\newdimen\@eps                    %
\@eps=0.0001pt                    % \eps = very small positive quantity

\def\section{\@startsection{section}{1}{\z@}
  {1.5\@bls plus 0.5\@bls}{1\@bls}{\normalsize\bf}}
\def\subsection{\@startsection{subsection}{2}{\z@}
  {1\@bls plus 0.25\@bls}{\@eps}{\normalsize\bf}}
\def\subsubsection{\@startsection{subsubsection}{3}{\z@}
  {1\@bls plus 0.25\@bls}{\@eps}{\normalsize\bf}}
\def\paragraph{\@startsection{paragraph}{4}{\parindent}
  {1\@bls plus 0.25\@bls}{0.5em}{\normalsize\bf}}
\def\subparagraph{\@startsection{subparagraph}{4}{\parindent}
  {1\@bls plus 0.25\@bls}{0.5em}{\normalsize\bf}}

\def\@sect#1#2#3#4#5#6[#7]#8{\ifnum #2>\c@secnumdepth
  \def\@svsec{}\else
  \refstepcounter{#1}\edef\@svsec{\csname the#1\endcsname.\hskip0.5em}\fi
  \@tempskipa #5\relax
  \ifdim \@tempskipa>\z@
    \begingroup
      #6\relax
      \@hangfrom{\hskip #3\relax\@svsec}{\interlinepenalty \@M #8\par}%
    \endgroup
    \csname #1mark\endcsname{#7}\addcontentsline
      {toc}{#1}{\ifnum #2>\c@secnumdepth \else
        \protect\numberline{\csname the#1\endcsname}\fi #7}%
  \else
    \def\@svsechd{#6\hskip #3\@svsec #8\csname #1mark\endcsname
      {#7}\addcontentsline{toc}{#1}{\ifnum #2>\c@secnumdepth \else
        \protect\numberline{\csname the#1\endcsname}\fi #7}}%
  \fi \@xsect{#5}}

% FIGURES AND TABLES
%\long\def\@makefigurecaption#1#2{\vskip 10mm #1. #2\par}

%\long\def\@maketablecaption#1#2{\hbox to \hsize{\parbox[t]{\hsize}
%  {#1 \\ #2}}\vskip 0.3ex}

%\def\fnum@figure{Figure \thefigure}
%\def\figure{\let\@makecaption\@makefigurecaption \@float{figure}}
%\@namedef{figure*}{\let\@makecaption\@makefigurecaption \@dblfloat{figure}}

% \def\fnum@table{Table \thetable}
%\def\table{\let\@makecaption\@maketablecaption \@float{table}}
%\@namedef{table*}{\let\@makecaption\@maketablecaption \@dblfloat{table}}

\floatsep 10mm plus 4pt minus 4pt % Space between adjacent floats moved
                                  % to top or bottom of text page.
\textfloatsep=\floatsep           % Space between main text and floats
                                  % at top or bottom of page.
\intextsep=\floatsep              % Space between in-text figures and
                                  % text.

% FOOTNOTE
\long\def\@makefntext#1{\parindent 1em\noindent\hbox{${}^{\@thefnmark}$}#1}

% EQUATION
%\mathindent=0em

% TITLE
\def\maketitle{\begingroup        % Initialize generation of front-matter
%   \let\thanks\@gobble
    \def\thefootnote{\fnsymbol{footnote}}%
    \newpage \global\@topnum\z@
    \@maketitle \@thanks
    \thispagestyle{plain}
  \endgroup
  % copy title and author into runtitle and runauthor if not already given
  \@ifundefined{@runtitle}{\global\let\@runtitle\@title}{}%
  \@ifundefined{@runauthor}{\global\let\@runauthor\@author}{}%
  % these three occur in the author string;
  % make them gobble their arguments
  \renewcommand\address[2][\relax]{}%
  \renewcommand\addressmark[1][\relax]{}%
  \let\thanks\@gobble
  \let\maketitle\relax \let\@maketitle\relax
  \gdef\@thanks{}%
  \gdef\@address{}\gdef\@author{}\gdef\@title{}}

\def\@maketitle{\null             % Actual formatting of \maketitle
  \vskip  5mm                     % Vertical space above title.
  \raggedright                    % Front-matter text is ragged right
  \hyphenpenalty\@M               % and is not hyphenated.
  {\Large \bf \@title \par}       % Title set in larger font.
  \vskip\@bls                     % One line of vertical space after title.
  {\normalsize                    % each author set in the normal
   \@author \par}                 % typeface size
  \vskip\@bls                     % One line of vertical space after author.
  \@address                       % all addresses
  \par}                           % One line of vertical space at the end.

\def\runtitle#1{\gdef\@runtitle{#1}}
\def\runauthor#1{\gdef\@runauthor{#1}}
\let\@runauthor\relax
\let\@runtitle\relax

\newcounter{address}
\def\theaddress{\alph{address}}
\def\@makeadmark#1{\hbox{$^{\rm #1}$}}

\def\address{\stepcounter{address}\addressmark
  \@ifnextchar[\@markaddress\@addtoaddress}
\def\@markaddress[#1]{%
  \expandafter\xdef\csname mkad@#1\endcsname{\theaddress}%
  \@addtoaddress}
\def\@addtoaddress#1{\begingroup
  \xdef\@tempa{\theaddress}\let\\=\relax
  \def\protect{\noexpand\protect\noexpand}\xdef\@address{\@address
  \protect\addresstext{\@tempa}{#1}}\endgroup}
\def\@address{}

\def\addressmark{\@ifnextchar[\@markedaddressmark
  {\xdef\@tempb{\theaddress}\@makeadmark{\@tempb}}}
\def\@markedaddressmark[#1]{\xdef\@tempb{\csname mkad@#1\endcsname}%
  \@makeadmark{\@tempb}}

\def\addresstext#1#2{\leavevmode \begingroup
  \raggedright \hyphenpenalty\@M \@makeadmark{#1}#2\par \endgroup
  \vskip\@bls}

% ABSTRACT:
\def\abstract{\vskip 0ex plus 2ex % extra glue after \maketitle
 \subsection*{Summary}%           % `Abstract' heading
}
\def\endabstract{\relax}

% BIBLIOGRAPHY
\def\thebibliography#1{\section*{REFERENCES}\list{\arabic{enumi}.}
  {\settowidth\labelwidth{#1.}\leftmargin=1.67em
   \labelsep\leftmargin \advance\labelsep-\labelwidth
   \itemsep\z@ \parsep\z@
   \usecounter{enumi}}\def\makelabel##1{\rlap{##1}\hss}%
   \def\newblock{\hskip 0.11em plus 0.33em minus -0.07em}
   \sloppy \clubpenalty=4000 \widowpenalty=4000 \sfcode`\.=1000\relax}

% Collapse citation numbers to ranges.
\newcount\@tempcntc
\def\@citex[#1]#2{\if@filesw\immediate\write\@auxout{\string\citation{#2}}\fi
  \@tempcnta\z@\@tempcntb\m@ne\def\@citea{}\@cite{\@for\@citeb:=#2\do
    {\@ifundefined
       {b@\@citeb}{\@citeo\@tempcntb\m@ne\@citea
        \def\@citea{,\penalty\@m\ }{\bf ?}\@warning
       {Citation `\@citeb' on page \thepage \space undefined}}%
    {\setbox\z@\hbox{\global\@tempcntc0\csname b@\@citeb\endcsname\relax}%
     \ifnum\@tempcntc=\z@ \@citeo\@tempcntb\m@ne
       \@citea\def\@citea{,\penalty\@m}
       \hbox{\csname b@\@citeb\endcsname}%
     \else
      \advance\@tempcntb\@ne
      \ifnum\@tempcntb=\@tempcntc
      \else\advance\@tempcntb\m@ne\@citeo
      \@tempcnta\@tempcntc\@tempcntb\@tempcntc\fi\fi}}\@citeo}{#1}}

\def\@citeo{\ifnum\@tempcnta>\@tempcntb\else\@citea
  \def\@citea{,\penalty\@m}%
  \ifnum\@tempcnta=\@tempcntb\the\@tempcnta\else
   {\advance\@tempcnta\@ne\ifnum\@tempcnta=\@tempcntb \else
\def\@citea{--}\fi
    \advance\@tempcnta\m@ne\the\@tempcnta\@citea\the\@tempcntb}\fi\fi}

% PAGE STYLES
\def\ps@crcplain{\let\@mkboth\@gobbletwo
     \def\@oddhead{\reset@font{\sl\rightmark}\hfil \rm\thepage}%
     \def\@evenhead{\reset@font\rm \thepage\hfil\sl\leftmark}%
     \let\@oddfoot\@empty
     \let\@evenfoot\@oddfoot}

\def\ps@crcheadings{\let\@mkboth\@gobbletwo
     \def\@oddhead{\reset@font{\let\\=\space \sl \@runtitle}\hfil \rm\thepage}%
     \def\@evenhead{\reset@font\rm \thepage\hfil\sl\@runauthor}%
     \let\@oddfoot\@empty
     \let\@evenfoot\@oddfoot}

% INITIALIZATION
\if@headings
  \ps@crcheadings                   % modified 'headings' page style
\else
  \ps@crcplain                      % modified 'plain' page style
\fi
