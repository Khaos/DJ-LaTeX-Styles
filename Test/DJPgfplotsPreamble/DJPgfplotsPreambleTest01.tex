%
% 2010-09-06
% (c) Copyright 2010 Dazhi Jiang. All Rights Reserved. 

%% TextMate Settings
%!TEX TS-program = pdflatex
%!TEX TS-options = "-interaction=nonstopmode -file-line-error-style"

%% This part of comment has intent to calculate the number of stream used in it.
%% Input:
%%			.tex
%%			.aux
%% Output:
%%			\openout1 = `DJPgfplotsPreambleTest01.aux'.
%%			\DJPgfplotsPreambleTest01@idxfile=\write5
%%			\openout5 = `DJPgfplotsPreambleTest01.idx'.
%%			Writing index file DJPgfplotsPreambleTest01.idx 
%%			\DJPgfplotsPreambleTest01memglofile=\write6
%%			\openout6 = `DJPgfplotsPreambleTest01.glo'.
%%			Writing glossary file DJPgfplotsPreambleTest01.glo 
%%			\@notefile=\write7
%%			\openout7 = `DJPgfplotsPreambleTest01.ent'.
%%			\egoutoutstre@m=\write8
%%			\openout8 = `DJPgfplotsPreambleTest01.ego'.
%%			\lines@idxfile=\write9
%%			\openout9 = `lines.idx'.
%%			\openout12 = `DJPgfplotsPreambleTest01.out'.
%%			\tf@toc=\write13
%%			\openout13 = `DJPgfplotsPreambleTest01.toc'.
%%			\tf@lof=\write14
%%			\openout14 = `DJPgfplotsPreambleTest01.lof'.
%%			\tf@lot=\write15
%%			\openout15 = `DJPgfplotsPreambleTest01.lot'.
%% 					\makeindex[lines]
%%					\tableofcontents
%%					\listoffigures
%%					\listoftables
%%					!! Dropped for saving \write output streams
%%					\listofegresults
%%					\pgfplotsmanualexternalexpensivetrue
%%					!! Three additional streams in memsty.sty
%%					\makeglossary
%%					\makepagenote
%%					\newoutputstream{egout}
%%					  \openoutputfile{\jobname.ego}{egout}


\pdfminorversion=5 % to allow compression
\pdfobjcompresslevel=2

%% !!!
% \RequirePackage{etex} % This needs an additional output stream
\documentclass[10pt,a4paper,extrafontsizes]{memoir}
\listfiles
\usepackage{etex}
\usepackage{comment}


% For (non-printing) notes  \PWnote{date}{text}
\newcommand{\PWnote}[2]{} 
\PWnote{2009/04/29}{Added fonttable to the used packages}
\PWnote{2009/08/19}{Made Part I a separate doc (memdesign.tex).}

% same
\newcommand{\LMnote}[2]{} 


\usepackage{memsty}
%% Check out whether stream 'egout' is open
% \IfStreamOpen{egout}{\closeoutputstream{egout}}{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{titlepages}  % code of the example titlepages
\usepackage{memlays}     % extra layout diagrams
\usepackage{dpfloat}     % floats on facing pages
\usepackage{fonttable}[2009/04/01]   % font tables
%%%%\usepackage{xr-hyper} \externaldocument{memdesign} Doesn't work, 
%%%%                      Idea won't work in general for memman/memdesin
%%%%                      as at display time, who knows where everything
%%%%                      will be located on the individual's computer.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%% Change section heading styles
%%%\memmansecheads

%%%% Use the built-in division styling
\headstyles{memman}

%%% ToC down to subsections
\settocdepth{subsection}
%%% Numbering down to subsections as well
\setsecnumdepth{subsection}

%%%% extra index for first lines
%% !!!
%% Comment this line to save room for \write
%% This the second index in memoir manual, named index of the first lines
% \makeindex[lines]


% this 'if' is used to determine whether we are compiling the memoir
% master in the subversion repository, or the public memman.tex
\newif\ifMASTER
% \MASTERfalse
%% Note that an additional stream is require to enable this feature.
\MASTERtrue

\ifMASTER
% private package, not in circulation
% enables us to gather svn information on a single file basis
% \usepackage[filehooks]{svn-multi-private}
%% Use 'svn-multi' stead
\usepackage[filehooks]{svn-multi}


% \svnidlong
% {}
% {$LastChangedDate: 2010-07-01 00:21:04 +0200 (Thu, 01 Jul 2010) $}
% {$LastChangedRevision: 244 $}
% {$LastChangedBy: daleif $}



\makeatletter
\newcommand\addRevisionData{%
  \begin{picture}(0,0)%
    \put(0,-20){%
      \tiny%
      \expandafter\@ifmtarg\expandafter{\svnfiledate}{}{%
        \textit{\textcolor{darkgray}{Chapter last updated \svnfileyear/\svnfilemonth/\svnfileday
         \enspace (revision \svnfilerev)}}
     }%
    }%
  \end{picture}%
}
\makeatother

% we add this to the first page of each chapter

\makepagestyle{chapter}
\makeoddfoot{chapter}{\addRevisionData}{\thepage}{}
\makeevenfoot{chapter}{\addRevisionData}{\thepage}{}

\else
% disable svn info collecting
\newcommand\svnidlong[4]{}
\fi

%% Load DJ's pgfplots preamble
\input{DJpgfplots.preamble.tex}
	
% \pgfplotsmanualexternalexpensivetrue


% \usepackage{hyperref}
% \hypersetup{pdfborder=0 0 0}
% \hypersetup{pdfborder=0 0 1}
% \usepackage{memhfixc}
% \usepackage{mempatch}

\usepackage{cleveref}

%% end preamble
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%#% extend

\begin{document}

%#% extstart input intro.tex

\tightlists
%%%%\firmlists
\midsloppy
\raggedbottom
\chapterstyle{demo3}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \input{memnoidxnum}

\frontmatter

\input{NotesonPGF-frontmatter.tex}

%#% extend

\cleardoublepage
\pagenumbering{arabic}

% body
\mainmatter


%% ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%\part{Practice} \label{part:practice}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%#% extstart include *.tex


\svnidlong
{$Ignore: $}
{$LastChangedDate: 2010-07-15 22:37:02 +0200 (Thu, 15 Jul 2010) $}
{$LastChangedRevision: 256 $}
{$LastChangedBy: daleif $}


\chapter{Examples from Books} % (fold)
\label{chap:examples_from_books}

% chapter examples_from_books (end)


%% ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\chapter{Test} % (fold)
\label{chap:test}

% chapter test (end)

An example of codeexample environment, which is defined in pgfmanual-en-macro.tex
\begin{codeexample}[code only]
\usepackage{pgfplots}
\pgfplotsset{compat=1.3}
\end{codeexample}


\Cref{sub:subsec1}

\begin{codeexample}[]
\begin{tikzpicture}
	\begin{semilogyaxis}[
		xlabel=Index,ylabel=Value]
	\addplot[color=blue,mark=*] coordinates {
		(1,8)
		(2,16)
		(3,32)
		(4,64)
		(5,128)
		(6,256)
		(7,512)
	};
	\end{semilogyaxis}%
\end{tikzpicture}%
\end{codeexample}

% chapter test (end)

%% ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

\chapter{Dump} % (fold)
\label{chap:dump}

\section{section name} % (fold)
\label{sec:section_name}


% section section_name (end)

\subsection{subsection name} % (fold)
\label{sub:subsection_name}

% subsection subsection_name (end)

\section{Section Test}

{
\catcode`\^^I=12
\begin{verbatimoutput}{memoir-verbatim.txt}
This is a 'verbatimoutput' environment which is used to test the tab character in the output file.
	At the head of this line, there is a tab.
    At the head of this line, there are four spaces.
Tab is eaten while spaces can be kept.
Also, it seems that the 'verbatimoutput' environment uses a temporary stream, this implies that no additional stream needed.
\end{verbatimoutput}
}

\subsection{SubSection Test1}
\label{sub:subsec1}

% chapter dump (end)

\end{document}

%\endinput


%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%%% (TeX-source-specials-mode: t)
%%% TeX-PDF-mode: t
%%% End: 
